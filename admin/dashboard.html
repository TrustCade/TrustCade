<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TrustCade</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Admin Authentication */
        .admin-login {
            display: flex;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 2rem;
        }
        
        .login-card {
            background: white;
            border-radius: 15px;
            padding: 3rem;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .login-header i {
            font-size: 3rem;
            color: #8B5CF6;
            margin-bottom: 1rem;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
            background: #f8f9fa;
            display: none; /* Hidden until logged in */
        }
        
        .admin-sidebar {
            width: 250px;
            background: #1a1a1a;
            color: white;
            padding: 2rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        .admin-logo {
            padding: 0 2rem 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 2rem;
        }
        
        .admin-user {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 1rem;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: #8B5CF6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .user-info h4 {
            margin: 0;
            font-size: 1rem;
        }
        
        .user-info small {
            color: #999;
            font-size: 0.8rem;
        }
        
        .admin-nav {
            padding: 0 1rem;
        }
        
        .admin-nav a {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 1rem;
            color: #b0b0b0;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .admin-nav a:hover,
        .admin-nav a.active {
            background: rgba(139, 92, 246, 0.2);
            color: white;
        }
        
        .admin-content {
            flex: 1;
            margin-left: 250px;
            padding: 2rem;
            max-width: calc(100% - 250px);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e9ecef;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .admin-stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .admin-stat-card:hover {
            transform: translateY(-5px);
        }
        
        .admin-stat-card h3 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: #8B5CF6;
        }
        
        .stat-trend {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.8rem;
            color: #666;
        }
        
        .trend-up { color: #10B981; }
        .trend-down { color: #EF4444; }
        
        .admin-table-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .table-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th {
            background: #f8f9fa;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: #555;
            border-bottom: 1px solid #e9ecef;
        }
        
        .admin-table td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .admin-table tr:hover {
            background: #f8f9fa;
        }
        
        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-pending { background: #FEF3C7; color: #92400E; }
        .status-approved { background: #D1FAE5; color: #065F46; }
        .status-shipped { background: #DBEAFE; color: #1E40AF; }
        .status-delivered { background: #D1FAE5; color: #065F46; }
        .status-rejected { background: #FEE2E2; color: #991B1B; }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            padding: 0.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .btn-approve { background: #10B981; color: white; }
        .btn-ship { background: #3B82F6; color: white; }
        .btn-view { background: #8B5CF6; color: white; }
        .btn-reject { background: #EF4444; color: white; }
        .btn-edit { background: #F59E0B; color: white; }
        .btn-delete { background: #6B7280; color: white; }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .action-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .action-card h3 {
            margin-bottom: 1rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #555;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #8B5CF6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        
        .btn-submit {
            width: 100%;
            padding: 0.8rem;
            background: #8B5CF6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-submit:hover {
            background: #7c3aed;
            transform: translateY(-2px);
        }
        
        /* Charts */
        .chart-container {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .chart-placeholder {
            height: 300px;
            background: #f8f9fa;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.2rem;
        }
        
        /* Modal */
        .admin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .modal-content {
            background: white;
            border-radius: 10px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        /* Tabs */
        .admin-tabs {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 2rem;
        }
        
        .tab {
            padding: 1rem 2rem;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab:hover {
            color: #8B5CF6;
        }
        
        .tab.active {
            color: #8B5CF6;
            border-bottom-color: #8B5CF6;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .admin-content {
                margin-left: 0;
                max-width: 100%;
                padding: 1rem;
            }
            
            .admin-sidebar {
                position: fixed;
                left: -250px;
                transition: left 0.3s ease;
                z-index: 100;
            }
            
            .admin-sidebar.active {
                left: 0;
            }
            
            .sidebar-toggle {
                display: block !important;
            }
        }
        
        @media (max-width: 768px) {
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .table-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
        }
        
        @media (max-width: 480px) {
            .admin-stats {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .login-card {
                padding: 2rem;
            }
        }
        
        /* Loading */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            color: #666;
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #8B5CF6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-right: 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Admin Login Screen -->
    <div class="admin-login" id="adminLogin">
        <div class="login-card">
            <div class="login-header">
                <i class="fas fa-user-shield"></i>
                <h2>Admin Access</h2>
                <p>TrustCade Management System</p>
            </div>
            
            <form id="adminLoginForm">
                <div class="form-group">
                    <label for="adminUsername">
                        <i class="fas fa-user"></i> Username
                    </label>
                    <input type="text" id="adminUsername" placeholder="Enter admin username" required>
                </div>
                
                <div class="form-group">
                    <label for="adminPassword">
                        <i class="fas fa-lock"></i> Password
                    </label>
                    <input type="password" id="adminPassword" placeholder="Enter admin password" required>
                </div>
                
                <div class="form-group">
                    <div class="captcha-container" style="background: #f8f9fa; padding: 1rem; border-radius: 5px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div id="captchaCode" style="font-family: monospace; font-size: 1.2rem; letter-spacing: 2px;"></div>
                            <button type="button" onclick="refreshCaptcha()" style="background: none; border: none; color: #8B5CF6; cursor: pointer;">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                    <input type="text" placeholder="Enter CAPTCHA code" id="captchaInput" required style="margin-top: 0.5rem;">
                </div>
                
                <button type="submit" class="btn-submit" id="loginButton">
                    <span id="loginText">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </span>
                    <span id="loginLoading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i> Authenticating...
                    </span>
                </button>
                
                <div style="text-align: center; margin-top: 1rem; color: #666; font-size: 0.9rem;">
                    <p>Default credentials: admin / admin123</p>
                    <p style="color: #EF4444; font-size: 0.8rem;">
                        <i class="fas fa-exclamation-triangle"></i> For security, change these in production!
                    </p>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Admin Dashboard -->
    <div class="admin-container" id="adminDashboard">
        <!-- Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <button class="sidebar-toggle" onclick="toggleSidebar()" style="display: none; position: absolute; top: 1rem; right: -50px; background: #8B5CF6; color: white; border: none; padding: 0.5rem; border-radius: 5px;">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="admin-logo">
                <h2><i class="fas fa-crown"></i> Admin Panel</h2>
                <p style="color: #666; font-size: 0.9rem;">TrustCade Management</p>
            </div>
            
            <div class="admin-user">
                <div class="user-avatar" id="adminAvatar">A</div>
                <div class="user-info">
                    <h4 id="adminName">Loading...</h4>
                    <small>Administrator</small>
                </div>
            </div>
            
            <nav class="admin-nav">
                <a href="#" class="active" onclick="showTab('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="#" onclick="showTab('prizes')">
                    <i class="fas fa-gift"></i> Manage Prizes
                </a>
                <a href="#" onclick="showTab('winners')">
                    <i class="fas fa-trophy"></i> Manage Winners
                </a>
                <a href="#" onclick="showTab('users')">
                    <i class="fas fa-users"></i> Manage Users
                </a>
                <a href="#" onclick="showTab('transactions')">
                    <i class="fas fa-money-bill-wave"></i> Transactions
                </a>
                <a href="#" onclick="showTab('settings')">
                    <i class="fas fa-cog"></i> Settings
                </a>
                <a href="#" onclick="logoutAdmin()" style="margin-top: 2rem; background: rgba(239, 68, 68, 0.2);">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="admin-content">
            <!-- Dashboard Header -->
            <div class="admin-header">
                <div>
                    <h1 id="pageTitle">Dashboard</h1>
                    <p style="color: #666; margin-top: 0.5rem;" id="pageSubtitle">
                        <i class="fas fa-clock"></i> <span id="currentTime">Loading...</span>
                    </p>
                </div>
                
                <div class="header-actions">
                    <button class="btn-spin" onclick="refreshDashboard()" id="refreshBtn">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button class="btn-spin" onclick="exportData()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
            
            <!-- Dashboard Tab -->
            <div class="tab-content active" id="dashboardTab">
                <!-- Stats -->
                <div class="admin-stats">
                    <div class="admin-stat-card">
                        <h3 id="totalWinners">5,247</h3>
                        <p>Total Winners</p>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> +24 today
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <h3 id="totalPayout">$892K</h3>
                        <p>Total Payout</p>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> +$12,450 today
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <h3 id="totalUsers">24,891</h3>
                        <p>Total Users</p>
                        <div class="stat-trend trend-up">
                            <i class="fas fa-arrow-up"></i> +189 today
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <h3 id="winRate">1:8</h3>
                        <p>Win Rate</p>
                        <div class="stat-trend">
                            <i class="fas fa-chart-line"></i> 12.5%
                        </div>
                    </div>
                </div>
                
                <!-- Charts -->
                <div class="chart-container">
                    <h3><i class="fas fa-chart-line"></i> Activity Overview</h3>
                    <div class="chart-placeholder" id="activityChart">
                        <i class="fas fa-chart-bar"></i> Activity chart would display here
                    </div>
                </div>
                
                <!-- Recent Claims -->
                <div class="admin-table-container">
                    <div class="table-header">
                        <h3><i class="fas fa-clock"></i> Recent Prize Claims</h3>
                        <div class="table-actions">
                            <button class="action-btn btn-view" onclick="viewAllClaims()">
                                <i class="fas fa-list"></i> View All
                            </button>
                        </div>
                    </div>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Prize</th>
                                <th>Value</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="claimsTable">
                            <!-- Claims loaded via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="action-card">
                        <h3><i class="fas fa-plus-circle"></i> Quick Actions</h3>
                        <button class="btn-submit" onclick="showModal('addPrizeModal')" style="margin-bottom: 1rem;">
                            <i class="fas fa-gift"></i> Add New Prize
                        </button>
                        <button class="btn-submit" onclick="showModal('postUpdateModal')" style="margin-bottom: 1rem;">
                            <i class="fas fa-bullhorn"></i> Post Update
                        </button>
                        <button class="btn-submit" onclick="showModal('sendNotificationModal')">
                            <i class="fas fa-bell"></i> Send Notification
                        </button>
                    </div>
                    
                    <div class="action-card">
                        <h3><i class="fas fa-chart-line"></i> Today's Stats</h3>
                        <div id="todayStats">
                            <!-- Stats loaded via JavaScript -->
                        </div>
                        <button class="btn-submit" onclick="showTab('analytics')">
                            <i class="fas fa-chart-bar"></i> View Analytics
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Manage Prizes Tab -->
            <div class="tab-content" id="prizesTab">
                <div class="admin-table-container">
                    <div class="table-header">
                        <h3><i class="fas fa-gift"></i> Manage Prizes</h3>
                        <div class="table-actions">
                            <button class="action-btn btn-view" onclick="showModal('addPrizeModal')">
                                <i class="fas fa-plus"></i> Add Prize
                            </button>
                            <button class="action-btn btn-edit" onclick="exportPrizes()">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Prize Name</th>
                                <th>Category</th>
                                <th>Value</th>
                                <th>Stock</th>
                                <th>Win Rate</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="prizesTable">
                            <!-- Prizes loaded via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Manage Winners Tab -->
            <div class="tab-content" id="winnersTab">
                <div class="admin-table-container">
                    <div class="table-header">
                        <h3><i class="fas fa-trophy"></i> Manage Winners</h3>
                        <div class="table-actions">
                            <input type="text" placeholder="Search winners..." style="padding: 0.5rem; border: 1px solid #e9ecef; border-radius: 5px;">
                            <button class="action-btn btn-approve" onclick="exportWinners()">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Winner</th>
                                <th>Prize</th>
                                <th>Value</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Claim Code</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="winnersTable">
                            <!-- Winners loaded via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Other tabs would continue similarly... -->
        </main>
    </div>
    
    <!-- Modals -->
    <div class="admin-modal" id="addPrizeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-gift"></i> Add New Prize</h3>
                <button class="modal-close" onclick="closeModal('addPrizeModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addPrizeForm">
                    <div class="form-group">
                        <label>Prize Name</label>
                        <input type="text" placeholder="e.g., iPhone 17 Pro Max" required>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select required>
                            <option value="">Select Category</option>
                            <option value="electronics">Electronics</option>
                            <option value="cash">Cash</option>
                            <option value="gaming">Gaming</option>
                            <option value="lifestyle">Lifestyle</option>
                            <option value="giftcards">Gift Cards</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Value ($)</label>
                        <input type="number" placeholder="e.g., 1299" required>
                    </div>
                    <div class="form-group">
                        <label>Stock Quantity</label>
                        <input type="number" placeholder="e.g., 10" required>
                    </div>
                    <div class="form-group">
                        <label>Win Rate (%)</label>
                        <input type="number" placeholder="e.g., 12.5" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label>Image URL</label>
                        <input type="url" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea rows="3" placeholder="Prize description..."></textarea>
                    </div>
                    <button type="submit" class="btn-submit">Add Prize</button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- View Claim Modal -->
    <div class="admin-modal" id="viewClaimModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-eye"></i> View Claim Details</h3>
                <button class="modal-close" onclick="closeModal('viewClaimModal')">&times;</button>
            </div>
            <div class="modal-body" id="claimDetails">
                <!-- Claim details loaded via JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Admin authentication
        const ADMIN_CREDENTIALS = {
            username: 'admin',
            password: 'admin123'
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check if already logged in
            const isLoggedIn = localStorage.getItem('trustcade_admin_logged') === 'true';
            
            if (isLoggedIn) {
                showDashboard();
            } else {
                showLogin();
            }
            
            // Setup login form
            document.getElementById('adminLoginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                loginAdmin();
            });
            
            // Generate CAPTCHA
            generateCaptcha();
            
            // Setup prize form
            document.getElementById('addPrizeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addPrize();
            });
            
            // Update time
            updateTime();
            setInterval(updateTime, 1000);
        });
        
        function showLogin() {
            document.getElementById('adminLogin').style.display = 'flex';
            document.getElementById('adminDashboard').style.display = 'none';
        }
        
        function showDashboard() {
            document.getElementById('adminLogin').style.display = 'none';
            document.getElementById('adminDashboard').style.display = 'flex';
            
            // Load dashboard data
            loadDashboardData();
            loadClaimsTable();
            loadTodayStats();
            loadPrizesTable();
            loadWinnersTable();
        }
        
        function loginAdmin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            const captcha = document.getElementById('captchaInput').value;
            const captchaCode = document.getElementById('captchaCode').textContent;
            
            // Show loading
            document.getElementById('loginText').style.display = 'none';
            document.getElementById('loginLoading').style.display = 'inline';
            
            setTimeout(() => {
                if (username === ADMIN_CREDENTIALS.username && 
                    password === ADMIN_CREDENTIALS.password &&
                    captcha === captchaCode) {
                    
                    // Login successful
                    localStorage.setItem('trustcade_admin_logged', 'true');
                    localStorage.setItem('trustcade_admin_user', username);
                    
                    showDashboard();
                    
                } else {
                    alert('Invalid credentials or CAPTCHA!');
                    generateCaptcha();
                    document.getElementById('adminPassword').value = '';
                    document.getElementById('captchaInput').value = '';
                }
                
                // Hide loading
                document.getElementById('loginText').style.display = 'inline';
                document.getElementById('loginLoading').style.display = 'none';
            }, 1000);
        }
        
        function logoutAdmin() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('trustcade_admin_logged');
                localStorage.removeItem('trustcade_admin_user');
                showLogin();
            }
        }
        
        function generateCaptcha() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('captchaCode').textContent = captcha;
        }
        
        function refreshCaptcha() {
            generateCaptcha();
            document.getElementById('captchaInput').value = '';
        }
        
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = 
                now.toLocaleDateString('en-US', { 
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }) + ' â€¢ ' + now.toLocaleTimeString();
        }
        
        function loadDashboardData() {
            // In a real app, this would fetch from API
            const adminUser = localStorage.getItem('trustcade_admin_user') || 'Admin';
            document.getElementById('adminName').textContent = adminUser;
            document.getElementById('adminAvatar').textContent = adminUser.charAt(0).toUpperCase();
        }
        
        function loadClaimsTable() {
            const claims = [
                {
                    user: "Alex Johnson",
                    email: "alex@example.com",
                    prize: "iPhone 17 Pro",
                    value: "$1,299",
                    date: new Date().toLocaleDateString(),
                    status: "pending",
                    claimCode: "TC-ABC123"
                },
                {
                    user: "Maria Garcia",
                    email: "maria@example.com",
                    prize: "$500 Cash",
                    value: "$500",
                    date: new Date().toLocaleDateString(),
                    status: "approved",
                    claimCode: "TC-DEF456"
                },
                {
                    user: "David Chen",
                    email: "david@example.com",
                    prize: "PlayStation 5",
                    value: "$499",
                    date: new Date().toLocaleDateString(),
                    status: "shipped",
                    claimCode: "TC-GHI789"
                },
                {
                    user: "Sarah Williams",
                    email: "sarah@example.com",
                    prize: "AirPods Pro",
                    value: "$249",
                    date: new Date().toLocaleDateString(),
                    status: "delivered",
                    claimCode: "TC-JKL012"
                }
            ];
            
            const table = document.getElementById('claimsTable');
            table.innerHTML = claims.map(claim => `
                <tr>
                    <td>
                        <strong>${claim.user}</strong><br>
                        <small>${claim.email}</small>
                    </td>
                    <td>${claim.prize}</td>
                    <td>${claim.value}</td>
                    <td>${claim.date}</td>
                    <td>
                        <span class="status-badge status-${claim.status}">
                            ${claim.status.charAt(0).toUpperCase() + claim.status.slice(1)}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            ${claim.status === 'pending' ? 
                                `<button class="action-btn btn-approve" onclick="approveClaim('${claim.claimCode}')" title="Approve">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="action-btn btn-reject" onclick="rejectClaim('${claim.claimCode}')" title="Reject">
                                    <i class="fas fa-times"></i>
                                </button>` : ''}
                            ${claim.status === 'approved' ? 
                                `<button class="action-btn btn-ship" onclick="shipPrize('${claim.claimCode}')" title="Mark as Shipped">
                                    <i class="fas fa-truck"></i>
                                </button>` : ''}
                            <button class="action-btn btn-view" onclick="viewClaim('${claim.claimCode}')" title="View Details">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn btn-edit" onclick="editClaim('${claim.claimCode}')" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        function loadTodayStats() {
            const stats = {
                spins: 324,
                wins: 41,
                newUsers: 189,
                revenue: 12450,
                pendingClaims: 12,
                activeUsers: 1256
            };
            
            document.getElementById('todayStats').innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1rem;">
                    <div>
                        <p><strong>Spins:</strong> ${stats.spins.toLocaleString()}</p>
                        <p><strong>Wins:</strong> ${stats.wins.toLocaleString()}</p>
                        <p><strong>Win Rate:</strong> ${((stats.wins/stats.spins)*100).toFixed(1)}%</p>
                    </div>
                    <div>
                        <p><strong>New Users:</strong> ${stats.newUsers.toLocaleString()}</p>
                        <p><strong>Revenue:</strong> $${stats.revenue.toLocaleString()}</p>
                        <p><strong>Pending Claims:</strong> ${stats.pendingClaims}</p>
                    </div>
                </div>
            `;
        }
        
        function loadPrizesTable() {
            const prizes = [
                { id: "P-001", name: "iPhone 17 Pro", category: "Electronics", value: "$1,299", stock: 5, winRate: "12.5%" },
                { id: "P-002", name: "$500 Cash", category: "Cash", value: "$500", stock: 25, winRate: "15.0%" },
                { id: "P-003", name: "PlayStation 5", category: "Gaming", value: "$499", stock: 8, winRate: "10.0%" },
                { id: "P-004", name: "MacBook Air", category: "Electronics", value: "$999", stock: 3, winRate: "8.5%" },
                { id: "P-005", name: "$100 Amazon Card", category: "Gift Cards", value: "$100", stock: 50, winRate: "20.0%" }
            ];
            
            const table = document.getElementById('prizesTable');
            table.innerHTML = prizes.map(prize => `
                <tr>
                    <td>${prize.id}</td>
                    <td>${prize.name}</td>
                    <td>${prize.category}</td>
                    <td>${prize.value}</td>
                    <td>${prize.stock}</td>
                    <td>${prize.winRate}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn btn-edit" onclick="editPrize('${prize.id}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn btn-view" onclick="viewPrize('${prize.id}')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn btn-delete" onclick="deletePrize('${prize.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        function loadWinnersTable() {
            const winners = [
                { name: "Alex Johnson", prize: "iPhone 17 Pro", value: "$1,299", date: "2024-03-15", status: "pending", claimCode: "TC-ABC123" },
                { name: "Maria Garcia", prize: "$500 Cash", value: "$500", date: "2024-03-14", status: "approved", claimCode: "TC-DEF456" },
                { name: "David Chen", prize: "PlayStation 5", value: "$499", date: "2024-03-13", status: "shipped", claimCode: "TC-GHI789" },
                { name: "Sarah Williams", prize: "AirPods Pro", value: "$249", date: "2024-03-12", status: "delivered", claimCode: "TC-JKL012" }
            ];
            
            const table = document.getElementById('winnersTable');
            table.innerHTML = winners.map(winner => `
                <tr>
                    <td>${winner.name}</td>
                    <td>${winner.prize}</td>
                    <td>${winner.value}</td>
                    <td>${winner.date}</td>
                    <td>
                        <span class="status-badge status-${winner.status}">
                            ${winner.status.charAt(0).toUpperCase() + winner.status.slice(1)}
                        </span>
                    </td>
                    <td><code>${winner.claimCode}</code></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn btn-view" onclick="viewWinner('${winner.claimCode}')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn btn-edit" onclick="editWinner('${winner.claimCode}')">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        // Action functions
        function approveClaim(claimCode) {
            if (confirm(`Approve claim ${claimCode}?`)) {
                alert(`Claim ${claimCode} approved!`);
                loadClaimsTable();
            }
        }
        
        function rejectClaim(claimCode) {
            if (confirm(`Reject claim ${claimCode}?`)) {
                alert(`Claim ${claimCode} rejected!`);
                loadClaimsTable();
            }
        }
        
        function shipPrize(claimCode) {
            if (confirm(`Mark prize for ${claimCode} as shipped?`)) {
                alert(`Prize for ${claimCode} marked as shipped!`);
                loadClaimsTable();
            }
        }
        
        function viewClaim(claimCode) {
            const claim = {
                code: claimCode,
                user: "Alex Johnson",
                email: "alex@example.com",
                prize: "iPhone 17 Pro",
                value: "$1,299",
                date: new Date().toLocaleDateString(),
                status: "pending",
                shippingAddress: "123 Main St, New York, NY 10001",
                phone: "+1 (555) 123-4567"
            };
            
            document.getElementById('claimDetails').innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #8B5CF6;">Claim Details</h4>
                    <p><strong>Claim Code:</strong> ${claim.code}</p>
                    <p><strong>User:</strong> ${claim.user}</p>
                    <p><strong>Email:</strong> ${claim.email}</p>
                    <p><strong>Phone:</strong> ${claim.phone}</p>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #8B5CF6;">Prize Information</h4>
                    <p><strong>Prize:</strong> ${claim.prize}</p>
                    <p><strong>Value:</strong> ${claim.value}</p>
                    <p><strong>Date Won:</strong> ${claim.date}</p>
                    <p><strong>Status:</strong> <span class="status-badge status-${claim.status}">${claim.status.charAt(0).toUpperCase() + claim.status.slice(1)}</span></p>
                </div>
                
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #8B5CF6;">Shipping Information</h4>
                    <p><strong>Address:</strong> ${claim.shippingAddress}</p>
                </div>
                
                <div style="display: flex; gap: 1rem;">
                    <button class="btn-submit" onclick="approveClaim('${claim.code}')" style="flex: 1;">
                        <i class="fas fa-check"></i> Approve
                    </button>
                    <button class="btn-submit" onclick="shipPrize('${claim.code}')" style="flex: 1; background: #3B82F6;">
                        <i class="fas fa-truck"></i> Mark Shipped
                    </button>
                </div>
            `;
            
            showModal('viewClaimModal');
        }
        
        function addPrize() {
            alert('Prize added successfully!');
            closeModal('addPrizeModal');
            document.getElementById('addPrizeForm').reset();
            loadPrizesTable();
        }
        
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.admin-nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Update active nav item
            document.querySelector(`.admin-nav a[onclick*="${tabName}"]`).classList.add('active');
            
            // Update page title
            const titles = {
                dashboard: 'Dashboard',
                prizes: 'Manage Prizes',
                winners: 'Manage Winners',
                users: 'Manage Users',
                transactions: 'Transactions',
                settings: 'Settings'
            };
            
            document.getElementById('pageTitle').textContent = titles[tabName] || 'Dashboard';
        }
        
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function toggleSidebar() {
            document.getElementById('adminSidebar').classList.toggle('active');
        }
        
        function refreshDashboard() {
            const btn = document.getElementById('refreshBtn');
            const originalHTML = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
            btn.disabled = true;
            
            setTimeout(() => {
                loadClaimsTable();
                loadTodayStats();
                updateTime();
                btn.innerHTML = originalHTML;
                btn.disabled = false;
                alert('Dashboard refreshed!');
            }, 1000);
        }
        
        function exportData() {
            alert('Data export started. This would download a CSV file in production.');
        }
        
        function viewAllClaims() {
            showTab('winners');
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('admin-modal')) {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
    </html>
